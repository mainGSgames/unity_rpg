<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Awaitable completion and continuation</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<meta property="relative-path-to-manual" content="">
<meta property="version-switcher-versions-with-this-page" content="Versions with this page:">
<meta property="version-switcher-versions-without-this-page" content="Versions without this page:">
<meta property="version-switcher-supported" content="Supported">
<meta property="version-switcher-legacy" content="Legacy">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<link rel="canonical" href="https://docs.unity3d.com/6000.2/Documentation/Manual/async-awaitable-continuations.html">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20250905"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20250905"></script><script type="text/javascript" src="../StaticFilesManual/js/image-comp.js?ts=20250905"></script><script type="text/javascript" src="docdata/toc.js?ts=20250905"></script><script type="text/javascript" src="docdata/global_toc.js?ts=20250905"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20250905">
<link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/icons.css?ts=20250905">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a aria-label="go to the homepage" href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" aria-label="Search manual documentation" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>Unity 6.2</b> (6000.2)
                                <div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/async-awaitable-continuations.html">English</a></li>
<li><a href="/cn/current/Manual/async-awaitable-continuations.html">中文</a></li>
<li><a href="/ja/current/Manual/async-awaitable-continuations.html">日本語</a></li>
<li><a href="/kr/current/Manual/async-awaitable-continuations.html">한국어</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a aria-label="go to the homepage" href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" aria-label="Search manual documentation" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: Unity 6.2</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/async-awaitable-continuations.html">English</a></li>
<li><a href="/cn/current/Manual/async-awaitable-continuations.html">中文</a></li>
<li><a href="/ja/current/Manual/async-awaitable-continuations.html">日本語</a></li>
<li><a href="/kr/current/Manual/async-awaitable-continuations.html">한국어</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="scripting.html">Programming in Unity</a></li>
<li><a href="scripting-optimization.html">Code optimization</a></li>
<li><a href="async-await-support.html">Asynchronous programming with the Awaitable class</a></li>
<li>Awaitable completion and continuation</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a aria-label="go to the previous page" href="async-awaitable-introduction.html"></a></span><div class="tip">Introduction to asynchronous programming with Awaitable</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a aria-label="go to the next page" href="async-awaitable-examples.html"></a></span><div class="tip">Awaitable code example reference</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Awaitable completion and continuation</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>The <code>await</code> operator suspends execution of the enclosing async method, which allows the calling thread to perform other work while waiting. When the awaited <code>Task</code> or <code>Awaitable</code> completes, the asynchronous code needs to resume and continue its execution from the point it was suspended. How asynchronous code resumes can have important effects on the function and performance of your application.</p>

<h2>.NET Task continuations</h2>

<p>Information about the state code was in when it began awaiting is referred to as the synchronization context. The .NET platform provides the <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.synchronizationcontext?view=net-8.0"><code>SynchronizationContext</code></a> class for capturing this type of information. <code>Task</code> continuations run in the synchronization context from which the asynchronous method was called, or through the <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.threadpool?view=net-8.0">thread pool</a> if no synchronization context was set.</p>

<p>Most Unity APIs aren’t thread-safe and can only be called from the main thread. For this reason, Unity overwrites the default <a href="https://docs.microsoft.com/en-us/archive/msdn-magazine/2011/february/msdn-magazine-parallel-computing-it-s-all-about-the-synchronizationcontext"><code>SynchronizationContext</code></a> with a custom <a href="https://github.com/Unity-Technologies/UnityCsReference/blob/master/Runtime/Export/Scripting/UnitySynchronizationContext.cs"><code>UnitySynchronizationContext</code></a> to ensure all .NET <code>Task</code> continuations in both Edit mode and Play mode run on the main thread by default. If you call a <code>Task</code>-returning method from the Unity main thread, the continuation is posted to the <code>UnitySynchronizationContext</code> and runs on the next frame <code>Update</code> tick on the main thread. If you call it from a background thread, it completes on a thread pool thread.</p>

<p>Capturing a synchronization context increases the performance overhead of your application and waiting for the next frame Update to resume on the main thread introduces latency at scale. You can avoid both these issues by using <code>Awaitable</code> instead.</p>

<h2>Awaitable continuations</h2>

<p>Unless documented otherwise, all <code>Awaitable</code> instances returned by Unity APIs, as well as any user defined <code>async Awaitable</code> returning methods, have the following continuation scheduling behaviour:</p>

<ul>
<li>If the method is called from the main thread, it resumes on the main frame.</li>
<li>Otherwise it resumes on a .NET <code>ThreadPool</code> thread.</li>
</ul>

<p>The notable exceptions to that are:</p>

<ul>
<li>
<code>Awaitable.MainThreadAsync</code>: continuation happens on the main thread.</li>
<li>
<code>Awaitable.BackgroundThreadAsync</code>: continuation happens on a background thread.</li>
</ul>

<p>The effect of <code>Awaitable.MainThreadAsync</code> and <code>Awaitable.BackgroundThreadAsync</code> are local to the current method only, for example:</p>

<pre><code class="lang-cs">private async Awaitable&lt;float&gt; DoHeavyComputationInBackgroundAsync()
{
    await Awaitable.BackgroundThreadAsync();
    // here we are on a background thread
    // do some heavy math here
    return 42; // note: we don't need to explicitly get back to the main thread here, depending on the caller thread, DoHeavyComputationInBackgroundAsync will automatically complete on the correct one.
}

public async Awaitable Start()
{
    var computationResult = await DoHeavyComputationInBackgroundAsync();
    // although DoHeavyComputationInBackgroundAsync() internally switches to a background thread to avoid blocking,
    // because we await it from the main thread, we also resume execution on the main thread and can safely call &quot;main thread only APIs&quot; such as LoadSceneAsync()
    await SceneManager.LoadSceneAsync(&quot;my-scene&quot;); // this will succeed as we resumed on main thread
}
</code></pre>

<p>
<strong>Note:</strong> Unity doesn’t automatically stop code running in the background when you exit Play mode. To cancel a background operation on exiting Play mode, use <a href="../ScriptReference/Application-exitCancellationToken.html"><code>Application.exitCancellationToken</code></a>.</p>

<h2>Thread switching and performance</h2>

<p>It’s most efficient to call <code>await Awaitable.MainThreadAsync()</code> from the main thread and <code>await Awaitable.BackgroundThreadAsync()</code> from a background thread because in each case the code resumes immediately on completion. If you switch back to the main thread from a background thread with <code>MainThreadAsync</code>, your code can’t resume until the next <a href="time-per-frame-updates.html">frame update</a> on the main thread.</p>

<p>If you call a <code>Task</code>-returning API from the main thread and it doesn’t complete synchronously, you’ll need to wait at least for the next <code>Update</code> tick (33ms at 30fps) for the continuation to run. If network latency is a concern, it’s recommended to do this off the main thread and use custom logic to synchronize between the main thread and <span class="tooltip"><strong>networking</strong><span class="tooltiptext">The Unity system that enables multiplayer gaming across a computer network. <a class="tooltipMoreInfoLink" href="multiplayer.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Networking">Glossary</a></span></span></span> tasks.</p>

<p>In <span class="tooltip"><strong>development builds</strong><span class="tooltiptext">A development build includes debug symbols and enables the Profiler. <a class="tooltipMoreInfoLink" href="https://docs.unity.com/devops/en/manual/build-target-configurations#Build_target_advanced_settings_overview">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#DevelopmentBuild">Glossary</a></span></span></span>, Unity displays the following error message if you try to use Unity APIs in multithreaded code:</p>

<pre><code>UnityException: Internal_CreateGameObject can only be called from the main thread.

Constructors and field initializers will be executed from the loading thread when loading a scene.

Don't use this function in the constructor or field initializers, instead move initialization code to the Awake or Start function.
</code></pre>

<p>
<strong>Important</strong>: For performance reasons, Unity doesn’t check for multithreaded behavior in <a href="build-profiles-reference.html">non-development builds</a> and doesn’t display this error in live builds. While Unity doesn’t prevent execution of multithreaded code in these contexts, crashes and other unpredictable errors are likely if you do use multiple threads. Instead of using your own multithreading, it’s safer to use Unity’s <a href="job-system.html">job system</a>. The job system uses multiple threads safely to execute jobs in parallel and achieve the performance benefits of multithreading. For more information, refer to <a href="job-system-overview.html">Job system overview</a>.</p>

<h3>Awaitable compared to the job system</h3>

<p>Unity’s <code>Awaitable</code> class is better suited to the following scenarios than the job system:</p>

<ul>
<li>Simplifying code when dealing with inherently asynchronous operations, such as manipulating files or performing web requests, in a non-blocking way.</li>
<li>Offloading long-running tasks (&gt;1 frame) to a background thread.</li>
<li>Modernizing iterator-based coroutines.</li>
<li>Awaiting multiple kinds of asynchronous operations (frame events, Unity events, third party asynchronous APIs, I/O).</li>
</ul>

<p>However, it’s not recommended for shorter-lived operations such as parallelizing computationally-intensive algorithms. To get the most of multi-core CPUs and parallelize your algorithms, use the <a href="job-system.html">job system</a> instead.</p>

<h2>Triggering completion from code</h2>

<p>
<a href="../ScriptReference/AwaitableCompletionSource.html"><code>AwaitableCompletionSource</code></a> and <a href="../ScriptReference/AwaitableCompletionSource_1.html"><code>AwaitableCompletionSource&lt;T&gt;</code></a> allow creation of <code>Awaitable</code> instances where completion is raised from user code. For example, this can be used to implement user prompts without having to implement a state machine to wait for the user interaction to finish:</p>

<pre><code class="lang-cs">
public class UserNamePrompt : MonoBehaviour 
{
    TextField _userNameTextField;
    AwaitableCompletionSource&lt;string&gt; _completionSource = new AwaitableCompletionSource&lt;string&gt;();
    public void Start()
    {
        var rootVisual = GetComponent&lt;UIDocument&gt;().rootVisualElement;
        var userNameField = rootVisual.Q&lt;TextField&gt;(&quot;userNameField&quot;);
        rootVisual.Q&lt;Button&gt;(&quot;OkButton&quot;).clicked += ()=&gt;{
            _completionSource.SetResult(userNameField.text);
        }
    }

    public Awaitable&lt;string&gt; WaitForUsernameAsync() =&gt; _completionSource.Awaitable;
}

...

public class HighScoreRanks : MonoBehaviour 
{
    ...
    public async Awaitable ReportCurrentUserScoreAsync(int score)
    {
        _userNameOverlayGameObject.SetActive(true);
        var prompt = _userNameOverlayGameObject.GetComponent&lt;UserNamePrompt&gt;();
        var userName = await prompt.WaitForUsernameAsync();
        _userNameOverlayGameObject.SetActive(false);
        await SomeAPICall(userName, score);
    }
}

</code></pre>

<h2>Additional resources</h2>

<ul>
<li><a href="async-awaitable-examples.html">Awaitable code example reference</a></li>
</ul>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a aria-label="go to the previous page" href="async-awaitable-introduction.html"></a></span><div class="tip">Introduction to asynchronous programming with Awaitable</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a aria-label="go to the next page" href="async-awaitable-examples.html"></a></span><div class="tip">Awaitable code example reference</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright ©2005-2025 Unity Technologies. All rights reserved. Built from 6000.2.5f1 (6de28e1118ee). Built on: 2025-09-05.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a><a href="https://unity.com/legal">Legal</a><a href="https://unity.com/legal/privacy-policy">Privacy Policy</a><a href="https://unity.com/legal/cookie-policy">Cookies</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
