<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Asynchronous tests</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<meta property="relative-path-to-manual" content="../">
<meta property="version-switcher-versions-with-this-page" content="Versions with this page:">
<meta property="version-switcher-versions-without-this-page" content="Versions without this page:">
<meta property="version-switcher-supported" content="Supported">
<meta property="version-switcher-legacy" content="Legacy">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../../StaticFilesManual/images/favicons/apple-touch-icon.png">
<link rel="canonical" href="https://docs.unity3d.com/6000.2/Documentation/Manual/test-framework/reference-async-tests.html">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../../StaticFilesManual/js/jquery.js?ts=20250905"></script><script type="text/javascript" src="../../StaticFilesManual/js/core.js?ts=20250905"></script><script type="text/javascript" src="../../StaticFilesManual/js/image-comp.js?ts=20250905"></script><script type="text/javascript" src="../docdata/toc.js?ts=20250905"></script><script type="text/javascript" src="../docdata/global_toc.js?ts=20250905"></script><link rel="stylesheet" type="text/css" href="../../StaticFilesManual/css/core.css?ts=20250905">
<link rel="stylesheet" type="text/css" href="../../StaticFilesManual/css/icons.css?ts=20250905">
<link rel="stylesheet" href="../../StaticFilesManual/css/prism.css">
<script src="../../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../../StaticFilesManual/css/mobileoptimisation.css">
<script src="../../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a aria-label="go to the homepage" href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="../30_search.html" method="get" class="apisearch">
<input type="text" name="q" aria-label="Search manual documentation" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../index.html" class="selected">Manual</a></li>
<li><a href="../../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>Unity 6.2</b> (6000.2)
                                <div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/test-framework/reference-async-tests.html">English</a></li>
<li><a href="/cn/current/Manual/test-framework/reference-async-tests.html">中文</a></li>
<li><a href="/ja/current/Manual/test-framework/reference-async-tests.html">日本語</a></li>
<li><a href="/kr/current/Manual/test-framework/reference-async-tests.html">한국어</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a aria-label="go to the homepage" href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" aria-label="Search manual documentation" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: Unity 6.2</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/test-framework/reference-async-tests.html">English</a></li>
<li><a href="/cn/current/Manual/test-framework/reference-async-tests.html">中文</a></li>
<li><a href="/ja/current/Manual/test-framework/reference-async-tests.html">日本語</a></li>
<li><a href="/kr/current/Manual/test-framework/reference-async-tests.html">한국어</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="../scripting.html">Programming in Unity</a></li>
<li><a href="../test-framework/test-framework-introduction.html">Testing your code</a></li>
<li><a href="../test-framework/writing-tests.html">Writing tests</a></li>
<li>Asynchronous tests</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a aria-label="go to the previous page" href="../test-framework/reference-tests-parameterized.html"></a></span><div class="tip">Parameterized tests</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a aria-label="go to the next page" href="../test-framework/running-tests.html"></a></span><div class="tip">Running tests</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Asynchronous tests</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>You can use the .NET Task asynchronous programming model to write asynchronous tests. If you’re new to asynchronous programming and its applications, refer to the <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/async/">Microsoft documentation</a> for a comprehensive guide. The documentation for <a href="https://docs.nunit.org/articles/nunit/writing-tests/attributes/test.html">NUnit Test</a>, also explains the requirements for an asynchronous test. Async code is run on the main thread and Unity Test Framework will <code>await</code> it by checking if the task is done on each <a href="https://docs.unity3d.com/ScriptReference/PlayerLoop.Update.html">update</a> for Play mode or on each <a href="https://docs.unity3d.com/ScriptReference/EditorApplication-update.html">EditorApplication.update</a> outside Play mode.</p>

<p>Note that any failing log messages will first be evaluated after the async test has completed. This means that if you have a failing log message in an async test, it will not be reported until the test has completed.</p>

<p>The following code snippet demonstrates an async test based on Microsoft’s making breakfast example. Note that the test method is marked with the <code>async</code> keyword and has return type <code>Task</code>. We set up a list of Tasks corresponding to asynchronous methods representing parts of the breakfast making process. We use <code>await</code> to start these tasks in a non-blocking way, write to the log when each one completes, and write again to the log when all are completed.</p>

<pre><code class="lang-cs">using System.Collections.Generic;
using System.Threading.Tasks;
using NUnit.Framework;
using UnityEngine;

public class AsyncExample
{
    [Test]
    public async Task MakeBreakfast_InTheMorning_IsEdible()
    {
        var eggsTask = FryEggsAsync(2);
        var baconTask = FryBaconAsync(3);
        var toastTask = MakeToastWithButterAndJamAsync(2);

        var breakfastTasks = new List&lt;Task&gt; { eggsTask, baconTask, toastTask };
        while (breakfastTasks.Count &gt; 0)
        {
            Task finishedTask = await Task.WhenAny(breakfastTasks);
            if (finishedTask == eggsTask)
            {
                Debug.Log(&quot;eggs are ready&quot;);
            }
            else if (finishedTask == baconTask)
            {
                Debug.Log(&quot;bacon is ready&quot;);
            }
            else if (finishedTask == toastTask)
            {
                Debug.Log(&quot;toast is ready&quot;);
            }
            breakfastTasks.Remove(finishedTask);
        }

        Debug.Log(&quot;Breakfast is ready!&quot;);
    }

    static async Task&lt;Toast&gt; MakeToastWithButterAndJamAsync(int number)
    {
        var toast = await ToastBreadAsync(number);
        ApplyButter(toast);
        ApplyJam(toast);

        return toast;
    }

    private static Juice PourOJ()
    {
        Debug.Log(&quot;Pouring orange juice&quot;);
        return new Juice();
    }

    private static void ApplyJam(Toast toast) =&gt;
        Debug.Log(&quot;Putting jam on the toast&quot;);

    private static void ApplyButter(Toast toast) =&gt;
        Debug.Log(&quot;Putting butter on the toast&quot;);

    private static async Task&lt;Toast&gt; ToastBreadAsync(int slices)
    {
        for (int slice = 0; slice &lt; slices; slice++)
        {
            Debug.Log(&quot;Putting a slice of bread in the toaster&quot;);
        }
        Debug.Log(&quot;Start toasting...&quot;);
        await Task.Delay(3000);
        Debug.Log(&quot;Remove toast from toaster&quot;);

        return new Toast();
    }

    private static async Task&lt;Bacon&gt; FryBaconAsync(int slices)
    {
        Debug.Log($&quot;putting {slices} slices of bacon in the pan&quot;);
        Debug.Log(&quot;cooking first side of bacon...&quot;);
        await Task.Delay(3000);
        for (int slice = 0; slice &lt; slices; slice++)
        {
            Debug.Log(&quot;flipping a slice of bacon&quot;);
        }
        Debug.Log(&quot;cooking the second side of bacon...&quot;);
        await Task.Delay(3000);
        Debug.Log(&quot;Put bacon on plate&quot;);

        return new Bacon();
    }

    private static async Task&lt;Egg&gt; FryEggsAsync(int howMany)
    {
        Debug.Log(&quot;Warming the egg pan...&quot;);
        await Task.Delay(3000);
        Debug.Log($&quot;cracking {howMany} eggs&quot;);
        Debug.Log(&quot;cooking the eggs ...&quot;);
        await Task.Delay(3000);
        Debug.Log(&quot;Put eggs on plate&quot;);

        return new Egg();
    }

    private static Coffee PourCoffee()
    {
        Debug.Log(&quot;Pouring coffee&quot;);
        return new Coffee();
    }

    public struct Toast
    {

    }

    public struct Juice
    {

    }

    public struct Bacon
    {

    }

    public struct Egg
    {

    }

    public struct Coffee
    {

    }
}
</code></pre>

<p>The following shows the result of running this example in the <strong><span class="tooltip"><strong>Test Runner</strong><span class="tooltiptext">The Test Framework package (formerly called the Test Runner) is a Unity tool that tests your code in both Edit mode and Play mode, and also on target platforms such as Standalone, Android, or iOS. <a class="tooltipMoreInfoLink" href="../https://docs.unity3d.com/Packages/com.unity.test-framework@latest">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="../Glossary.html#TestRunner">Glossary</a></span></span></span></strong> window:</p>

<figure>
<img src="../../uploads/Main/test-framework/async.png" alt="The Test Runner window and console displaying the output of the previous async test code example.">
<figcaption>The Test Runner window and console displaying the output of the previous async test code example.</figcaption>
</figure>

<h2>Editor freezing on <code>Assert.ThrowsAsync</code> and workaround</h2>

<p>NUnit’s assertion for asynchronous code, <a href="https://docs.nunit.org/articles/nunit/writing-tests/assertions/classic-assertions/Assert.ThrowsAsync.html">Assert.ThrowsAsync</a>, blocks the calling thread until the async function you pass in completes. By default Unity runs asynchronous functions on the main thread in case they need to call the Editor API, which means <code>Assert.ThrowsAsync</code> can lock up the main thread and cause the Editor to freeze.</p>

<p>To workaround this problem, you can unwrap the <code>Assert.ThrowsAsync</code> logic into your own <code>try</code>/<code>catch</code> blocks and assert that you caught something. For example, <strong>do</strong> this:</p>

<pre><code class="lang-cs">[Test]
public async Task ThisDoesNotLockTheMainThread()
 {
  bool caught = false;
  try
  { 
    await Task.Delay(1000); throw new System.Exception(&quot;Hello world.&quot;); }
    catch (System.Exception x)
   {
     caught = true;
   }
   Assert.That(caught);
}
</code></pre>

<p>
<strong>Instead of</strong> this:</p>

<pre><code class="lang-cs">[Test]
public void ThisLocksTheMainThread()
 {
  Assert.ThrowsAsync&lt;System.Exception&gt;(async () =&gt;
   { await Task.Delay(1000); throw new System.Exception(&quot;Hello world.&quot;); }
  );
}
</code></pre>

<h2>Additional resources</h2>

<ul>
<li><a href="../async-await-support.html">Asynchronous programming with the Awaitable class</a></li>
<li><a href="asserting-and-comparing.html">Asserting and comparing</a></li>
</ul>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a aria-label="go to the previous page" href="../test-framework/reference-tests-parameterized.html"></a></span><div class="tip">Parameterized tests</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a aria-label="go to the next page" href="../test-framework/running-tests.html"></a></span><div class="tip">Running tests</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright ©2005-2025 Unity Technologies. All rights reserved. Built from 6000.2.5f1 (6de28e1118ee). Built on: 2025-09-05.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a><a href="https://unity.com/legal">Legal</a><a href="https://unity.com/legal/privacy-policy">Privacy Policy</a><a href="https://unity.com/legal/cookie-policy">Cookies</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
