<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Setting up and cleaning up at build time</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<meta property="relative-path-to-manual" content="../">
<meta property="version-switcher-versions-with-this-page" content="Versions with this page:">
<meta property="version-switcher-versions-without-this-page" content="Versions without this page:">
<meta property="version-switcher-supported" content="Supported">
<meta property="version-switcher-legacy" content="Legacy">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../../StaticFilesManual/images/favicons/apple-touch-icon.png">
<link rel="canonical" href="https://docs.unity3d.com/6000.2/Documentation/Manual/test-framework/reference-setup-and-cleanup.html">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../../StaticFilesManual/js/jquery.js?ts=20250905"></script><script type="text/javascript" src="../../StaticFilesManual/js/core.js?ts=20250905"></script><script type="text/javascript" src="../../StaticFilesManual/js/image-comp.js?ts=20250905"></script><script type="text/javascript" src="../docdata/toc.js?ts=20250905"></script><script type="text/javascript" src="../docdata/global_toc.js?ts=20250905"></script><link rel="stylesheet" type="text/css" href="../../StaticFilesManual/css/core.css?ts=20250905">
<link rel="stylesheet" type="text/css" href="../../StaticFilesManual/css/icons.css?ts=20250905">
<link rel="stylesheet" href="../../StaticFilesManual/css/prism.css">
<script src="../../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../../StaticFilesManual/css/mobileoptimisation.css">
<script src="../../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a aria-label="go to the homepage" href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="../30_search.html" method="get" class="apisearch">
<input type="text" name="q" aria-label="Search manual documentation" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../index.html" class="selected">Manual</a></li>
<li><a href="../../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>Unity 6.2</b> (6000.2)
                                <div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/test-framework/reference-setup-and-cleanup.html">English</a></li>
<li><a href="/cn/current/Manual/test-framework/reference-setup-and-cleanup.html">中文</a></li>
<li><a href="/ja/current/Manual/test-framework/reference-setup-and-cleanup.html">日本語</a></li>
<li><a href="/kr/current/Manual/test-framework/reference-setup-and-cleanup.html">한국어</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a aria-label="go to the homepage" href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" aria-label="Search manual documentation" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: Unity 6.2</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/test-framework/reference-setup-and-cleanup.html">English</a></li>
<li><a href="/cn/current/Manual/test-framework/reference-setup-and-cleanup.html">中文</a></li>
<li><a href="/ja/current/Manual/test-framework/reference-setup-and-cleanup.html">日本語</a></li>
<li><a href="/kr/current/Manual/test-framework/reference-setup-and-cleanup.html">한국어</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="../scripting.html">Programming in Unity</a></li>
<li><a href="../test-framework/test-framework-introduction.html">Testing your code</a></li>
<li><a href="../test-framework/writing-tests.html">Writing tests</a></li>
<li><a href="../test-framework/before-and-after-tests.html">Performing actions before and after tests</a></li>
<li>Setting up and cleaning up at build time</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a aria-label="go to the previous page" href="../test-framework/reference-outerunitytestaction.html"></a></span><div class="tip">Performing actions before setup or after tear down</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a aria-label="go to the next page" href="../test-framework/reference-actions-outside-tests.html"></a></span><div class="tip">Execution order of test actions</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Setting up and cleaning up at build time</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Sometimes you might want to make changes to Unity or the file system before building tests and then clean up these changes after the test run. You can incorporate pre-build setup and post-build cleanup stages in your tests in one of the following ways: </p>

<ul>
<li>Implement <a href="https://docs.unity3d.com/Packages/com.unity.test-framework@latest/index.html?subfolder=/api/UnityEngine.TestTools.IPrebuildSetup.html"><code>IPrebuildSetup</code></a> and <a href="https://docs.unity3d.com/Packages/com.unity.test-framework@latest/index.html?subfolder=/api/UnityEngine.TestTools.IPostBuildCleanup.html"><code>IPostBuildCleanup</code></a> interfaces in a test class.</li>
<li>Apply the <a href="https://docs.unity3d.com/Packages/com.unity.test-framework@latest/index.html?subfolder=/api/UnityEngine.TestTools.PrebuildSetupAttribute.html"><code>[PrebuildSetup]</code></a> and <a href="https://docs.unity3d.com/Packages/com.unity.test-framework@latest/index.html?subfolder=/api/UnityEngine.TestTools.PostBuildCleanupAttribute.html"><code>[PostBuildCleanup]</code></a> attributes to your test class, to an individual test, or to the test assembly, and provide a class that implements the corresponding interface as an argument. For example, decorate a test method with <code>[PrebuildSetup(&quot;MyTestSceneSetup&quot;)]</code> to perform prebuild setup work defined in a class called <code>MyTestSceneSetup</code> that implements <code>IPrebuildSetup</code>.</li>
</ul>

<p>Both <code>PrebuildSetup</code> and <code>PostBuildCleanup</code> attributes run if the test or test class they’re applied to is included in the current test run. The test is included when you run all tests or if you define a <a href="extension-run-tests.html">filter</a> that includes it. If multiple tests reference the same pre-build setup or post-build cleanup, then it only runs once.</p>

<p>The following example implements <code>IPrebuildSetup</code> on a test class to define work to perform prior to building tests:</p>

<pre><code class="lang-cs">[TestFixture]
public class CreateSpriteTest : IPrebuildSetup
{
    Texture2D m_Texture;
    Sprite m_Sprite;
    
    public void Setup()
    {

#if UNITY_EDITOR

        var spritePath = &quot;Assets/Resources/Circle.png&quot;;

        var ti = UnityEditor.AssetImporter.GetAtPath(spritePath) as UnityEditor.TextureImporter;

        ti.textureCompression = UnityEditor.TextureImporterCompression.Uncompressed;

        ti.SaveAndReimport();

#endif
    }

    [SetUp]
    public void SetUpTest()
    {
        m_Texture = Resources.Load&lt;Texture2D&gt;(&quot;Circle&quot;);
    }

    [Test]
    public void WhenNullTextureIsPassed_CreateShouldReturnNullSprite()
    {

        // Check with Valid Texture.

        LogAssert.Expect(LogType.Log, &quot;Circle Sprite Created&quot;);

        Sprite.Create(m_Texture, new Rect(0, 0, m_Texture.width, m_Texture.height), new Vector2(0.5f, 0.5f));

        Debug.Log(&quot;Circle Sprite Created&quot;);

        // Check with NULL Texture. Should return NULL Sprite.

        m_Sprite = Sprite.Create(null, new Rect(0, 0, m_Texture.width, m_Texture.height), new Vector2(0.5f, 0.5f));

        Assert.That(m_Sprite, Is.Null, &quot;Sprite created with null texture should be null&quot;);

    }
}
</code></pre>

<p>
<strong>Note</strong>: Use <code>#if UNITY_EDITOR</code> if you want to access Editor only APIs, but the setup/cleanup is inside a <strong>Play Mode</strong> assembly.</p>

<h2>Execution order</h2>

<p>All setups run in a deterministic order one after another. Setups defined with attributes run first. Then any test class implementing the interface runs, in alphabetical order within their namespace, which is the same order as the tests run.</p>

<p>In a Player build, cleanup runs immediately after the test. In the Unity Editor cleanup runs only after related tests complete.</p>

<h2>Additional resources</h2>

<ul>
<li><a href="course/build-setup-cleanup.html">Setup and cleanup at build time</a></li>
</ul>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a aria-label="go to the previous page" href="../test-framework/reference-outerunitytestaction.html"></a></span><div class="tip">Performing actions before setup or after tear down</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a aria-label="go to the next page" href="../test-framework/reference-actions-outside-tests.html"></a></span><div class="tip">Execution order of test actions</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright ©2005-2025 Unity Technologies. All rights reserved. Built from 6000.2.5f1 (6de28e1118ee). Built on: 2025-09-05.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a><a href="https://unity.com/legal">Legal</a><a href="https://unity.com/legal/privacy-policy">Privacy Policy</a><a href="https://unity.com/legal/cookie-policy">Cookies</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
