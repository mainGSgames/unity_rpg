<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Get the current framebuffer from GPU memory in URP</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<meta property="relative-path-to-manual" content="../">
<meta property="version-switcher-versions-with-this-page" content="Versions with this page:">
<meta property="version-switcher-versions-without-this-page" content="Versions without this page:">
<meta property="version-switcher-supported" content="Supported">
<meta property="version-switcher-legacy" content="Legacy">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../../StaticFilesManual/images/favicons/apple-touch-icon.png">
<link rel="canonical" href="https://docs.unity3d.com/6000.2/Documentation/Manual/urp/render-graph-framebuffer-fetch.html">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../../StaticFilesManual/js/jquery.js?ts=20250905"></script><script type="text/javascript" src="../../StaticFilesManual/js/core.js?ts=20250905"></script><script type="text/javascript" src="../../StaticFilesManual/js/image-comp.js?ts=20250905"></script><script type="text/javascript" src="../docdata/toc.js?ts=20250905"></script><script type="text/javascript" src="../docdata/global_toc.js?ts=20250905"></script><link rel="stylesheet" type="text/css" href="../../StaticFilesManual/css/core.css?ts=20250905">
<link rel="stylesheet" type="text/css" href="../../StaticFilesManual/css/icons.css?ts=20250905">
<link rel="stylesheet" href="../../StaticFilesManual/css/prism.css">
<script src="../../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../../StaticFilesManual/css/mobileoptimisation.css">
<script src="../../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a aria-label="go to the homepage" href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="../30_search.html" method="get" class="apisearch">
<input type="text" name="q" aria-label="Search manual documentation" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../index.html" class="selected">Manual</a></li>
<li><a href="../../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>Unity 6.2</b> (6000.2)
                                <div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/urp/render-graph-framebuffer-fetch.html">English</a></li>
<li><a href="/cn/current/Manual/urp/render-graph-framebuffer-fetch.html">中文</a></li>
<li><a href="/ja/current/Manual/urp/render-graph-framebuffer-fetch.html">日本語</a></li>
<li><a href="/kr/current/Manual/urp/render-graph-framebuffer-fetch.html">한국어</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a aria-label="go to the homepage" href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" aria-label="Search manual documentation" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: Unity 6.2</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/urp/render-graph-framebuffer-fetch.html">English</a></li>
<li><a href="/cn/current/Manual/urp/render-graph-framebuffer-fetch.html">中文</a></li>
<li><a href="/ja/current/Manual/urp/render-graph-framebuffer-fetch.html">日本語</a></li>
<li><a href="/kr/current/Manual/urp/render-graph-framebuffer-fetch.html">한국어</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="../render-pipelines.html">Render pipelines</a></li>
<li><a href="../universal-render-pipeline.html">Using the Universal Render Pipeline</a></li>
<li><a href="../urp/customizing-urp.html">Custom rendering and post-processing in URP</a></li>
<li><a href="../urp/render-graph.html">Render graph system in URP</a></li>
<li><a href="../urp/render-graph-frame-data.html">Frame data in the render graph system in URP</a></li>
<li>Get the current framebuffer from GPU memory in URP</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a aria-label="go to the previous page" href="../urp/render-graph-add-textures-to-camera-history.html"></a></span><div class="tip">Add textures to the camera history</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a aria-label="go to the next page" href="../urp/render-graph-frame-data-reference.html"></a></span><div class="tip">Frame data textures reference for URP</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Get the current framebuffer from GPU memory in URP</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>To more efficiently read a frame that Unity rendered in a previous pass, use the <code>SetInputAttachment</code> API to set the output of a render pass as the input of the next render pass.</p>

<p>Using <code>SetInputAttachment</code> means the render pass can access the framebuffer from the on-chip memory of the GPU, instead of video memory. This speeds up rendering, because the GPU doesn’t need to copy the texture to and from its video memory. This process is sometimes called framebuffer fetch.</p>

<p>On mobile devices, rendering speed improves on mobile devices that use tile-based deferred rendering (TBDR). The GPU keeps the frame in its on-chip tile memory between render passes, using less memory bandwidth and processing time.</p>

<p>If you use the <code>SetInputAttachment</code> API, URP merges the render passes that write to the framebuffer and read from it. You can check this in the <a href="render-graph-viewer-reference.html">Render Graph Viewer window</a>.</p>

<p>You can also use <code>SetInputAttachment</code> to read other render targets, for example a G-buffer.</p>

<h2>Requirements</h2>

<p>The <code>SetInputAttachment</code> API is supported if you use one of the following graphics APIs:</p>

<ul>
<li>Vulkan</li>
<li>Metal</li>
</ul>

<p>If you use <code>SetInputAttachment</code> with an unsupported API, Unity copies the texture to and from video memory, so there’s no effect on rendering speed.</p>

<h2>Use the <code>SetInputAttachment</code> API</h2>

<p>To use the <code>SetInputAttachment</code> API in a render pass, use the following:</p>

<ul>
<li>The <code>SetInputAttachment</code> API to set the output of the previous render pass as the input of the new render pass.</li>
<li>The <code>LOAD_FRAMEBUFFER_X_INPUT</code> macro in your fragment <span class="tooltip"><strong>shader</strong><span class="tooltiptext">A program that runs on the GPU. <a class="tooltipMoreInfoLink" href="../Shaders.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="../Glossary.html#Shader">Glossary</a></span></span></span> code to read the <span class="tooltip"><strong>pixel</strong><span class="tooltiptext">The smallest unit in a computer image. Pixel size depends on your screen resolution. Pixel lighting is calculated at every screen pixel. <a class="tooltipMoreInfoLink" href="../ShadowPerformance.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="../Glossary.html#pixel">Glossary</a></span></span></span> from the previous render pass, instead of a sampling macro such as <code>SAMPLE_TEXTURE2D</code>.</li>
</ul>

<p>The following steps assume you already have one render pass that writes to a <code>TextureHandle</code> called <code>sourceTextureHandle</code>.</p>

<ol>
<li><p>Create a custom shader, then create a material from the shader. For more information about creating a custom shader, refer to <a href="writing-custom-shaders-urp.html">Writing custom shaders</a>.</p></li>
<li>
<p>Inside the HLSLPROGRAM of your custom shader, make sure you import the <code>Packages/com.unity.render-pipelines.core/Runtime/Utilities/Blit.hlsl</code> file:</p>

<pre><code class="lang-hlsl">HLSLPROGRAM
...
#include &quot;Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl&quot;
...
ENDHLSL
</code></pre>
</li>
<li>
<p>Inside the HLSLPROGRAM, use one of the following to declare the texture from the previous render pass. For example:</p>

<ul>
<li><code>FRAMEBUFFER_INPUT_X_HALF</code></li>
<li><code>FRAMEBUFFER_INPUT_X_FLOAT</code></li>
<li><code>FRAMEBUFFER_INPUT_X_INT</code></li>
<li><code>FRAMEBUFFER_INPUT_X_UINT</code></li>
</ul>

<p>For example:</p>

<pre><code class="lang-hlsl">FRAMEBUFFER_INPUT_X_HALF(0);
</code></pre>
</li>
<li>
<p>In the fragment function, use <code>LOAD_FRAMEBUFFER_X_INPUT</code> to sample the texture from on-chip GPU memory. For example:</p>

<pre><code class="lang-hlsl">half4 frag() : SV_Target
{
    half4 colorFromPreviousRenderPass = LOAD_FRAMEBUFFER_X_INPUT(0, input.positionCS.xy);
    return colorFromPreviousRenderPass;
}
</code></pre>
</li>
<li>
<p>In a new render graph render pass, add the material you created to your <code>PassData</code>. For example:</p>

<pre><code class="lang-cs">class PassData
{
    public Material exampleMaterial;
}
</code></pre>
</li>
<li>
<p>Use <code>builder.SetInputAttachment</code> to set the output of the previous render pass as the input of the new render pass. For example:</p>

<pre><code class="lang-cs">builder.SetInputAttachment(sourceTextureHandle, 0, AccessFlags.Read);
</code></pre>
</li>
<li>
<p>In your <code>SetRenderFunc</code> method, use a command such as <code>BlitTexture</code> to render using the material. For example:</p>

<pre><code class="lang-cs">static void ExecutePass(PassData data, RasterGraphContext context)
{
    Blitter.BlitTexture(context.cmd, new Vector4(1, 1, 0, 0), exampleMaterial, 1);
}
</code></pre>
</li>
</ol>

<h2>Example</h2>

<p>For a full example, refer to the example called <strong>FrameBufferFetch</strong> in the <a href="package-samples.html">render graph system URP package samples</a>.</p>

<h2>Additional resources</h2>

<ul>
<li><a href="writing-custom-shaders-urp.html">Writing custom shaders</a></li>
<li><a href="render-graph-write-render-pass.html">Write a render pass using the render graph system</a></li>
<li><a href="render-graph-pass-textures-between-passes.html">Transfer a texture between render passes</a></li>
</ul>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a aria-label="go to the previous page" href="../urp/render-graph-add-textures-to-camera-history.html"></a></span><div class="tip">Add textures to the camera history</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a aria-label="go to the next page" href="../urp/render-graph-frame-data-reference.html"></a></span><div class="tip">Frame data textures reference for URP</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright ©2005-2025 Unity Technologies. All rights reserved. Built from 6000.2.5f1 (6de28e1118ee). Built on: 2025-09-05.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a><a href="https://unity.com/legal">Legal</a><a href="https://unity.com/legal/privacy-policy">Privacy Policy</a><a href="https://unity.com/legal/cookie-policy">Cookies</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
